<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />

    <title>ReusableChart</title>
    <style>
      .line {
        fill: none;
        stroke: blue;
        stroke-width: 1px;
      }

      .line:hover {
        stroke-width: 2px;
      }

      .area {
        fill: #969696;
      }

      svg {
        font: 10px sans-serif;
      }

      .axis path, .axis line {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
      }

    </style>

  </head>
  <body>
    <h1>Towards a Reusable Chart</h1>
    <div id="chart_div1">
      chart1
    </div>
    <div id="chart_div2">
      chart2
    </div>
    <div id="chart_div3">
      chart 3
    </div>
    <div id="chart_div4">
      chart 4
    </div>

    <script src="./lib/d3/d3.v3.js">
      //Place scripts at end of body.
    </script>
    <script src="src/scatterChart.js"></script>
    <script>
      //Based on Mike Bostock's 'Towards Reusable Charts' http://bost.ocks.org/mike/chart/

      var elevData = [[0, 118], [10, 114], [20, 120], [30, 102], [40, 124], [50, 100], [60, 85], [70, 131], [80, 122], [90, 150], [100, 109], [130, 121]];

      var elevData2 = [[0, 128], [15, 154], [25, 140], [33, 282], [48, 134], [52, 140], [61, 115], [75, 131], [87, 102], [93, 110], [109, 149], [110, 131]];

      var elevData3 = [[0, 56], [15, 54], [25, 40], [33, 62], [48, 34], [52, 40], [61, 15], [75, 31], [87, 10], [93, 11], [109, 49], [150, 0]];

      //console.log(elevData2);

      var bigData = [elevData, elevData2, elevData3];

      //console.log(bigData);

      var timeData = [["date", "price"], ["Jan 2000", 1394.46], ["Feb 2000", 1366.42], ["Mar 2000", 1498.58], ["Apr 2000", 1452.43], ["May 2000", 1420.6], ["Jun 2000", 1454.6], ["Jul 2000", 1430.83], ["Aug 2000", 1517.68]];

      //console.log(elevData);
      //console.log("elevData: "+ elevData[0][1]);
      //console.log(elevData[0][1]);

      d3.select("#chart_div1").datum([elevData]).call(scatterChart());

      var secondChart = scatterChart().width(window.innerWidth - 10);

      d3.select("#chart_div2").datum([elevData, elevData3]).call(secondChart
      //use .x to replace the default function to access the x element.
      //.x(function(d) { return +d[0]; })
      //.y(function(d) { return +d[1]; })
      );

      var thirdChart = scatterChart().width(window.innerWidth - 20);
      //thirdChart.width(200);
      var thirdDiv = d3.select("#chart_div3");
      thirdDiv.datum(bigData).call(thirdChart
      //.x(function(d) { return +d[0]; })
      //.y(function(d) { return +d[1]; })
      );
      window.onresize = resized;

      function resized() {
        //Do I need to do the width here?
        //secondChart;
        d3.select("#chart_div2").call(secondChart.width(window.innerWidth - 10));
        //secondDiv.call(secondChart);
        thirdChart.width(window.innerWidth - 10);
        thirdDiv.call(thirdChart);
        fourthDiv.call(fourthChart.width(window.innerWidth - 10));
      }

      //thirdDiv.call(thirdChart);
      // Timie to create  a fourth chart using the time data!

      var fourthChart = scatterChart().width(window.innerWidth - 20);
      var fourthDiv = d3.select("#chart_div4");
      var newData = [];
      console.log(newData);
      //add timeData to the array, but without the headers in the first row.
      newData.push(elevData);
      console.log(newData);

      fourthDiv.datum(newData).call(fourthChart);
      newData.push(elevData2);
      //This doesn't work to replot the graph.'
      fourthDiv.datum(newData).call(fourthChart);
      //window.onresize = fourthDiv.call(fourthChart.width(window.innerWidth - 10));

    </script>
  </body>
</html>